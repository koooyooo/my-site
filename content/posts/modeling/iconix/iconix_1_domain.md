---
title: "ICONIX - 1.Domain分析"
date: 2020-12-06T01:30:34+09:00
draft: false
---
## ICONIXの分析工程
ここでは、ICONIXの分析工程を見てゆきます。最初に全てのベースとなる静的モデルのドメイン分析、続けて動的モデルのユースケース分析、ロバストネス分析、そしてシーケンス分析と進みます。この過程で、全ての主要な用語はドメイン分析で作成したドメイン用語集を元に行わなければなりません。

ドメイン用語集に「ユーザー」と定義したならば、以降の分析に出てくる用語は「利用者」ではなく「ユーザー」なのです。「利用者」の方が適切だと思ったのならば、まずドメイン用語集を直さなければなりません。では、最初にそのドメイン分析から入りたいと思います。

### ドメイン分析

ドメイン用語集は全ての工程の基本です。フワフワとした曖昧な言葉を棄て、正確で本質的な用語を捉えてゆくと、思考がクリアになります。また、ドメイン用語は属性も定義しますので、「ユーザー」と定義した際に「ユーザーID」や「氏名」「住所」等が含まれているのか否かも明確になります。

仮に「ユーザーID」や「氏名」「住所」等が含まれていた場合は、会話の中で「ユーザーを渡し…」といった場合にこれらの情報も付随することが分かるわけです。厳密さだけではなく簡潔さも手に入れる事ができます。会話と文書が徐々に変わってゆくのが体験できるかも知れません。

---

ドメイン分析を行うには、最初に**ドメイン用語の候補を抽出**します。これはドメインエキスパートが提供するユーザーストーリー等から導き出します。何やら難しそうに聞こえますが、ドメインエキスパートというのは業務に詳しい担当者、ユーザーストーリーとは業務の流れを説明した文章です。簡単に説明すると「お話を聞いたり文章を読んだりしてキーワードを見つける」という作業に過ぎません。

一通りドメイン用語が洗い出せたなら、次に**用語同士の関連**を洗い出します。最初に**単純な線**で関連を引いてみましょう。ここで注意するのは、厳密に定義しすぎると多くの用語同士に線が引かれてゴチャついてくる事態です。原則としてドメイン分析はモデリング作業なので、全て正確に洗い出すというより「大事な部分を強調し細かい部分は無視する」というスタンスが重要です。余計な部分を削ぎ落としてこそ大事な部分が目立つからです。

用語間に線を引き終えたら、次に線を三種類に分類しましょう。「関連」「汎化」「集約」の関係に大きく分類できれば良いと思います。

| # | 項目 | 説明 |
| --- | --- | --- |
| 1 | 関連 | 用語同士の対等な関係です。AはBを使う、AがBを生成する、AはBを参照する…等です |
| 2 | 汎化 | 用語同士の抽象的な関係です。"is a" とも表現され「課金ユーザー」は「ユーザ」を継承する…等です |
| 3 | 集約 | 用語同士の構造的な関係です。"has a" とも表現され「エンジン」は「バイク」に含まれる…等です |

&nbsp;  
一旦大きく分類が出来たら、次に関連を詳細化しましょう。

| # | 項目 | 説明 |
| --- | --- | --- |
| 1 | 関連 | 用語同士の関連に名前をつけ、関連が片方向のものであれば関連線を矢印(→)に変更します |
| 2 | 汎化 | 汎化関係を「汎化」と「実現」に細かく分類します |
| 3 | 集約 | 集約関係を「集約」と「コンポジション」に細かく分類します |

&nbsp;  
関連の詳細化が終わったら、汎化(実現) 以外の関連に数的な関係を定義します。例えば「バイク」と「エンジン」の数的関係は 1:1 です。最大300人が入れる映画館とお客さんの数的関係は 1:0..300です。Webページと閲覧者の関係は、0..*:0..*です。どちらも0にも出来ますし、無限にもできるからです。

> 但し、バイクの生産中の過程も管理する様であれば、組立て前のバイクや、部品としてのエンジンもあるかも知れません。バイクから見てエンジンは0か1、エンジンから見たバイクも0か1、そうなると双方の関係は 0..1:0..1となりそうです。  
(0…1は 0以上1以下を表します)

| # | 項目 | 説明 |
| --- | --- | --- |
| 1 | 目的 | 用語の定義と関連を明確にし、文書や会話で利用しつつ、プログラムに落としやすくする |
| 2 | 手法 | ユーザーストーリー・会話の中から主要な単語を拾い、関連を徐々に詳細化する |

<!--
### ユースケース分析
### ロバストネス分析
### シーケンス分析
-->
